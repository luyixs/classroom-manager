{"ast":null,"code":"import axios from 'axios';\nimport nanoid from \"nanoid\";\nexport default {\n  components: {},\n  props: {},\n  data() {\n    return {\n      searchWord: '',\n      pagination: {\n        currentPage: 1,\n        pageSize: 5,\n        total: 30\n      },\n      //分页\n      courseList: [],\n      //选课列表\n      roleOptions: [{\n        value: 'student',\n        label: '学生'\n      }, {\n        value: 'teacher',\n        label: '教师'\n      }, {\n        value: 'admin',\n        label: '管理员'\n      }],\n      radio: 1,\n      formData: {\n        id: '',\n        name: '',\n        pwd: '',\n        className: '',\n        academy: '',\n        major: '',\n        tel: '',\n        email: '',\n        role: 'student'\n      }\n    };\n  },\n  watch: {},\n  computed: {},\n  methods: {\n    getMyCourse(condition) {\n      // console.log('getMycourse')\n      axios({\n        method: 'GET',\n        url: '/sc/mycourse/list',\n        params: {\n          q: condition\n        }\n      }).then(rsp => {\n        console.log(rsp.data);\n        if (rsp.data.success) this.courseList = rsp.data.data;\n      }, err => {\n        this.$message.error(err.message);\n      });\n    },\n    //退课\n    handleDropCourse(index, row) {\n      // this.$message(index, row)\n      console.log(index, row);\n      axios({\n        method: 'DELETE',\n        url: '/sc',\n        data: row.scId\n      }).then(rsp => {\n        console.log('rsp:', rsp.data);\n        if (rsp.data.success) {\n          this.$message({\n            message: '退课成功！',\n            type: 'success'\n          });\n        } else {\n          this.$message(\"退课失败\");\n        }\n      }, err => {\n        this.$message.error(err.message);\n      }).finally(() => {\n        this.getMyCourse(\"\");\n      });\n    },\n    //查询课程\n    handleSearch() {\n      console.log(this.searchWord);\n      this.getMyCourse(this.searchWord);\n    }\n  },\n  created() {},\n  mounted() {\n    this.getMyCourse(\"\");\n  }\n};","map":{"version":3,"mappings":"AAqCA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MAAA;MACAC;MAAA;MACAC;QAAAC;QAAAC;MAAA;QAAAD;QAAAC;MAAA;QACAD;QACAC;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IAEA;EACA;EACAC;EACAC;EACAC;IAEAC;MACA;MACAC;QAAAC;QAAAC;QAAAC;UAAAC;QAAA;MAAA;QACAC;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAD;MACAL;QACAC;QACAC;QACA3B;MACA;QACA8B;QACA;UACA;YAAAE;YAAAC;UAAA;QACA;UACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACAJ;MACA;IACA;EACA;EACAK;EACAC;IACA;EACA;AACA","names":["components","props","data","searchWord","pagination","currentPage","pageSize","total","courseList","roleOptions","value","label","radio","formData","id","name","pwd","className","academy","major","tel","email","role","watch","computed","methods","getMyCourse","axios","method","url","params","q","console","handleDropCourse","message","type","handleSearch","created","mounted"],"sourceRoot":"src/components/MyCourse","sources":["MyCourse.vue"],"sourcesContent":["<template>\r\n  <el-main>\r\n    <h2>我的课程</h2>\r\n\r\n    <div>\r\n      <span>查询：</span>\r\n      <el-input placeholder=\"Search...\" size=\"medium\" style=\"width: 200px;\" suffix-icon=\"el-icon-search\"\r\n        v-model=\"searchWord\">\r\n      </el-input>\r\n      <el-button round type=\"primary\" size=\"medium\" icon=\"el-icon-search\" @click=\"handleSearch\"></el-button>\r\n      <el-button round type=\"primary\" size=\"medium\" icon=\"el-icon-refresh\" @click=\"getMyCourse('')\"></el-button>\r\n    </div>\r\n    <el-divider></el-divider>\r\n    <div class=\"sc-container\">\r\n      <el-table :data=\"courseList\" style=\"width: 100%\" current-row-key=\"cId\">\r\n        <el-table-column prop=\"cId\" label=\"课程ID\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"cName\" label=\"课程名称\"></el-table-column>\r\n        <el-table-column prop=\"teacherId\" label=\"教师ID\"></el-table-column>\r\n        <el-table-column prop=\"credit\" label=\"学分\" width=\"50px\"></el-table-column>\r\n        <el-table-column prop=\"classRoom\" label=\"教室\"></el-table-column>\r\n        <el-table-column prop=\"limit\" label=\"人数\" width=\"50px\"></el-table-column>\r\n        <el-table-column prop=\"type\" label=\"选修类型\"></el-table-column>\r\n        <el-table-column prop=\"academy\" label=\"学院\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleDropCourse(scope.$index, scope.row)\">退课\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport nanoid from \"nanoid\";\r\nexport default {\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      searchWord: '',\r\n      pagination: {\r\n        currentPage: 1,\r\n        pageSize: 5,\r\n        total: 30\r\n      }, //分页\r\n      courseList: [], //选课列表\r\n      roleOptions: [{ value: 'student', label: '学生' }, { value: 'teacher', label: '教师' }, {\r\n        value: 'admin',\r\n        label: '管理员'\r\n      }],\r\n      radio: 1,\r\n      formData: {\r\n        id: '',\r\n        name: '',\r\n        pwd: '',\r\n        className: '',\r\n        academy: '',\r\n        major: '',\r\n        tel: '',\r\n        email: '',\r\n        role: 'student'\r\n      },\r\n\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {},\r\n  methods: {\r\n\r\n    getMyCourse(condition) {\r\n      // console.log('getMycourse')\r\n      axios({ method: 'GET', url: '/sc/mycourse/list', params: { q: condition } }).then(rsp => {\r\n        console.log(rsp.data)\r\n        if (rsp.data.success) this.courseList = rsp.data.data;\r\n      }, err => {\r\n        this.$message.error(err.message)\r\n      })\r\n    },\r\n    //退课\r\n    handleDropCourse(index, row) {\r\n      // this.$message(index, row)\r\n      console.log(index, row)\r\n      axios({\r\n        method: 'DELETE',\r\n        url: '/sc',\r\n        data: row.scId\r\n      }).then(rsp => {\r\n        console.log('rsp:', rsp.data)\r\n        if (rsp.data.success) {\r\n          this.$message({ message: '退课成功！', type: 'success' });\r\n        } else {\r\n          this.$message(\"退课失败\")\r\n        }\r\n      }, err => {\r\n        this.$message.error(err.message)\r\n      }).finally(() => {\r\n        this.getMyCourse(\"\")\r\n      })\r\n    },\r\n\r\n    //查询课程\r\n    handleSearch() {\r\n      console.log(this.searchWord);\r\n      this.getMyCourse(this.searchWord);\r\n    },\r\n  },\r\n  created() { },\r\n  mounted() {\r\n    this.getMyCourse(\"\");\r\n   }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}